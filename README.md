# cgm
Documenting my journey of reverse-engineering the Dexcom G5 Continuous Glucose Monitor.

**Step 1: Understanding the Dexcom G5 Continuous Glucose Monitoring System**

The Dexcom G5 Continuous Glucose Monitoring System is a suite of software and hardware products sold by Dexcom, Inc. designed to facilitate measurement of blood glucose in individuals with type one diabetes mellitus (T1D). T1D is an autoimmune disease wherein some insult (genetic, environmental, infectious, etc.) causes the body to recognize one's own insulin-secreting beta cells of the pancreas as foreign, leading to an immune response to destroy said beta cells. This process occurs over the course of months, and eventually the immune response will destroy the body's beta cells to the point where insufficient insulin is being produced to accomodate the needs of the individual. There are currently no commercially-available means of restoring the lost beta cells, and thus people with T1D must take in exogenous insulin, often by needle or subcutaneous infusion via insulin pump. When one consumes food, the food is digested and glucose eventually ends up in the bloodstream, to be conducted to other organ systems by insulin. Insulin is a hormone which binds different receptors around the body to facilitate the movement of glucose from the blood into various tissues, like the brain, muscles, liver, and other organ systems. Dosing requirements are unique to each individual, and are affected by many variables, such as body composition, activity level, age, biological sex, stress, illness, and foods consumed, as well as many other variables. There are many deleterious effects of having elevated blood glucose, specifically when blood glucose is chronically elevated. These effects can be broadly categorized into small vessel disease, large vessel disease, and neurological disease. Optimizing blood glucose control such that blood glucose is maintained at around 5.5mmol/L (100mg/dL) is known to correlate with decreased long-term side effects of diabetes (both type 1 and type 2.) It follows, then, that having a continuous measurement of blood glucose may allow for greater control of blood glucose, and therefore less long-term complications relating to diabetes. This is the impetus behind development of continuous glucose monitoring systems such as the Dexcom G5 CGM system.

Dexcom's CGM system is expensive and often not covered even under the best private drug benefits in Canada. A year of transmitter and sensor costs $3,108CAD, and is sold under contract by Dexcom. This equates to $259CAD/month, which is just under $10/day. Transmitters are said to last 90 days, after which time a notification appears on your receiver device stating that the battery is low and to order a new transmitter. Then, at 112 days, the device will shut down and not reconnect, stating that the battery has died and that the device no longer will function. The problem is that the device still has sufficient battery left, and this can be shown by pairing the transmitter with a third-party app such as XDrip-iOS (formerly Spike-iOS) on iPhone, or XDrip on Android. My transmitter went until 195 days before the battery truly died. To be fair to Dexcom, it is likely that they were only able to prove that the device would last a minimum of 112 days because of variability in the supply chain of battery supplier and chip suppliers, likely having slight variations in battery capacity and power consumption. There is a destructive means of replacing batteries in the transmitter, which I will document elsewhere in this git. There are many good reasons for developing the transmitter in such a way that is disposable: its waterproof rating because it is sealed, robustness, lack of surfaces for harmful organisms to grow, smooth surface to prevent catching on clothing, as well as others, I am sure. But, it is my opinion that a strong driving factor in the decision to make this a disposable product is profitability. The 112-day battery limit even with reliable charge in the batteries corroborates this theory. If your customers require a replacement every 90/112 days, then you have a constant stream of revenue to further appease shareholders (and, admittably, fund future research and development.) I will leave the rest of the politics surrounding this issue to another discussion forum, and will continue with my documentation of the Dexcom G5.

From Dexcom's patent filings ([US7591801B2](https://patents.google.com/patent/US7591801B2/en?q=continuous&q=glucose&q=monitor&assignee=Dexcom%2c+Inc.), [US20120108934A1](https://patents.google.com/patent/US20120108934A1/en?q=continuous&q=glucose&q=monitor&assignee=Dexcom%2c+Inc.)) we can see the overall device comprises a "sensor", which is made up of a subcutaneously-inserted metal filament connected to a mounting structure with a means of electrically connecting to a "transmitter", a device designed to interpret the analog signal coming from the sensor. This transmitter is designed to be robust and waterproof (it holds an IP28 rating, meaning it is not extremely shock-resistant [the first digit refers to physical robustness, ranging from 0 to 6], but holds the highest IP rating for waterproof [the second digit ranges from 0 to 8])

From Dexcom's filings, they refer to the sensor as a *continuous analyte sensor*, and the transmitter as a *sensor electronics module*. Dexcom rightfully obfuscates their hardware in order to protect their patent, so I must assume the contents of their transmitter device at the moment. Once I receive an extra transmitter, I intend on sacrificing it in order to reverse-engineer the device with ample documentation to be shared. This will come in the form of an update to this README.md.

**The transmitter likely contains the following technology, based on preliminary findings and research:**
1. Two SR1120W (silver oxide) batteries wired in parallel (1.5V nominal)
2. A Low-Energy (LE) Bluetooth transmitter IC with antenna (note they may be using a custom SoC, perhaps based on Nordic Semiconductor's N52832/nRF52832)
3. An IC responsible for transcoding analog data from sensor into digital data to be transmitted by Bluetooth IC (this may not be required if this is integrated into the SoC from 2.)
4. A buck converter IC to power the Bluetooth transmitter IC, as it will not run on 1.5V.

The data transmitted from the sensor+transmitter combo, worn on the arm, is sent to a receiver. An iOS or Android device running software designed to interpret such data over Bluetooth is an eligible receiver, as is Dexcom's own product, which is a small device with a screen to show a UI as well as buttons for user interaction. A teardown of the Dexcom G5 Receiver device by Adrian Black is found [here](https://www.youtube.com/watch?v=mmQgIdNVt7U). The device runs a custom version of Windows CE.

**Step 2: Destructive replacement of batteries in the Dexcom G5 Transmitter**

